# LabelStudio

ä¸€å€‹å°ˆç‚ºèª²å ‚æ•™å­¸è¨­è¨ˆçš„è¼•é‡ç´šåœ–ç‰‡æ¨™è¨»å·¥å…·ï¼Œè®“å­¸å“¡èƒ½åœ¨å€åŸŸç¶²è·¯å…§å”åŒé€²è¡Œè³‡æ–™æ¨™è¨»ã€‚

## å°ˆæ¡ˆå‹•æ©Ÿ

[Roboflow](https://roboflow.com) æ˜¯å„ªç§€çš„åœ–ç‰‡æ¨™è¨»èˆ‡è¨“ç·´ SaaS å¹³å°ï¼Œä½†è¨»å†Šé™åˆ¶å¤šã€ä¾è³´å¤–ç¶²ã€‚æœ¬å°ˆæ¡ˆç›®æ¨™æ˜¯æ‰“é€ ä¸€å€‹**å¯é›¢ç·šéƒ¨ç½²ã€é©åˆæ•™å­¸æƒ…å¢ƒ**çš„æ›¿ä»£æ–¹æ¡ˆã€‚

## æŠ€è¡“æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (Vue 3)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Canvas æ¨™è¨»  â”‚ â”‚  å°ˆæ¡ˆç®¡ç†   â”‚ â”‚   åœ˜éšŠå”ä½œä»‹é¢   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend (Flask)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ¨™è¨»æœå‹™    â”‚ â”‚  ç”¨æˆ¶èªè­‰   â”‚ â”‚   æª”æ¡ˆç®¡ç†      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Storage (SQLite + File System)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŠŸèƒ½è¦åŠƒ

### 1. æ¨™è¨»å·¥å…· (åƒè€ƒ Roboflow Annotate)

| å·¥å…· | å¿«æ·éµ | èªªæ˜ |
|------|--------|------|
| **Bounding Box** | `B` | çŸ©å½¢æ¡†æ¨™è¨»ï¼Œç”¨æ–¼ç‰©ä»¶åµæ¸¬ |
| **Polygon** | `P` | å¤šé‚Šå½¢æ¨™è¨»ï¼Œç”¨æ–¼ç²¾ç¢ºè¼ªå»“ |
| **Brush/Mask** | `U` | ç­†åˆ·é®ç½©ï¼Œç”¨æ–¼èªæ„åˆ†å‰² |
| **Drag/Select** | `D` | é¸å–ã€ç§»å‹•ã€èª¿æ•´æ¨™è¨»å¤§å° |
| **Zoom** | `Z` / æ»¾è¼ª | æ”¾å¤§ç¸®å°ç•«å¸ƒ |
| **Undo/Redo** | `Ctrl+Z` / `Ctrl+Y` | å¾©åŸèˆ‡é‡åš |

### 2. å°ˆæ¡ˆç®¡ç†

- **å°ˆæ¡ˆå»ºç«‹**ï¼šæ•™å¸«å¯å»ºç«‹æ¨™è¨»å°ˆæ¡ˆï¼Œå®šç¾©é¡åˆ¥ (Ontology)
- **åœ–ç‰‡ä¸Šå‚³**ï¼šæ”¯æ´æ‰¹æ¬¡ä¸Šå‚³ JPGã€PNGã€BMP ç­‰æ ¼å¼
- **è³‡æ–™é›†åˆ†å‰²**ï¼šè‡ªå‹•æˆ–æ‰‹å‹•åˆ†é… Train / Validation / Test
- **é¡åˆ¥ç®¡ç†**ï¼šæ–°å¢ã€ç·¨è¼¯ã€åˆªé™¤æ¨™è¨»é¡åˆ¥ï¼Œæ”¯æ´é¡è‰²è¨­å®š

### 3. åœ˜éšŠå”ä½œ (æ•™å­¸æƒ…å¢ƒ)

- **è§’è‰²æ¬Šé™**
  - `æ•™å¸« (Admin)`ï¼šå»ºç«‹å°ˆæ¡ˆã€ç®¡ç†é¡åˆ¥ã€å¯©æ ¸æ¨™è¨»ã€åŒ¯å‡ºè³‡æ–™
  - `å­¸å“¡ (Labeler)`ï¼šåŸ·è¡Œæ¨™è¨»ä»»å‹™
  - `å¯©æ ¸è€… (Reviewer)`ï¼šæª¢æŸ¥æ¨™è¨»å“è³ª

- **ä»»å‹™åˆ†é…**ï¼šå°‡åœ–ç‰‡åˆ†é…çµ¦ä¸åŒå­¸å“¡æ¨™è¨»
- **é€²åº¦è¿½è¹¤**ï¼šå³æ™‚æŸ¥çœ‹å„å­¸å“¡æ¨™è¨»é€²åº¦
- **æ¨™è¨»æ­·å²**ï¼šè¨˜éŒ„æ¯å¼µåœ–ç‰‡çš„ä¿®æ”¹æ­·å²
- **è©•è«–åŠŸèƒ½**ï¼šæ•™å¸«å¯å°æ¨™è¨»çµ¦äºˆå›é¥‹

### 4. æ‰‹æ©Ÿæƒç¢¼ä¸Šå‚³ (QR Code)

å°ˆç‚ºèª²å ‚è¨­è¨ˆçš„å¿«é€Ÿåœ–ç‰‡æ”¶é›†åŠŸèƒ½ï¼Œå­¸å“¡ç”¨æ‰‹æ©Ÿæƒç¢¼å³å¯ä¸Šå‚³åœ–ç‰‡ã€‚

#### ä½¿ç”¨æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•™å¸«ç«¯ (é›»è…¦)                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å°ˆæ¡ˆ: è²“ç‹—è¾¨è­˜                    [ é¡¯ç¤º QR Code ]  â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚
â”‚  â”‚     â”‚ â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„ â”‚   æƒæåŠ å…¥ï¼š                    â”‚   â”‚
â”‚  â”‚     â”‚ â–ˆ         â–ˆ â”‚   http://192.168.1.100:5000     â”‚   â”‚
â”‚  â”‚     â”‚ â–ˆ  QRç¢¼   â–ˆ â”‚   /upload/proj_abc123           â”‚   â”‚
â”‚  â”‚     â”‚ â–ˆ         â–ˆ â”‚                                 â”‚   â”‚
â”‚  â”‚     â”‚ â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€ â”‚   å·²ä¸Šå‚³: 47 å¼µ                 â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   åœ¨ç·šå­¸å“¡: 12 äºº               â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  [ è¤‡è£½é€£çµ ]  [ ä¸‹è¼‰ QR Code ]  [ å…¨è¢å¹•é¡¯ç¤º ]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ æƒç¢¼
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å­¸å“¡ç«¯ (æ‰‹æ©Ÿç€è¦½å™¨)                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚              ğŸ“·                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚         é»æ“Šæ‹ç…§æˆ–é¸æ“‡ç›¸ç°¿                    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                       â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ–¼ â”‚ â”‚ ğŸ–¼ â”‚ â”‚ ğŸ–¼ â”‚ â”‚ +  â”‚  å·²é¸ 3 å¼µ            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  æš±ç¨±: [  ç‹å°æ˜  ]                                  â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚              ä¸Šå‚³ (3 å¼µ)                     â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŠŸèƒ½ç‰¹é»

- **å…ç™»å…¥ä¸Šå‚³**ï¼šå­¸å“¡åªéœ€è¼¸å…¥æš±ç¨±ï¼Œç„¡éœ€è¨»å†Šå¸³è™Ÿ
- **æ‰¹æ¬¡é¸æ“‡**ï¼šæ”¯æ´ä¸€æ¬¡é¸æ“‡å¤šå¼µç…§ç‰‡ä¸Šå‚³
- **å³æ™‚æ‹ç…§**ï¼šå¯ç›´æ¥å•Ÿå‹•ç›¸æ©Ÿæ‹æ”
- **ä¸Šå‚³é€²åº¦**ï¼šé¡¯ç¤ºä¸Šå‚³é€²åº¦èˆ‡æˆåŠŸ/å¤±æ•—ç‹€æ…‹
- **è‡ªå‹•å£“ç¸®**ï¼šæ‰‹æ©Ÿç«¯è‡ªå‹•å£“ç¸®å¤§åœ–ï¼ŒåŠ é€Ÿä¸Šå‚³
- **ä¾†æºè¿½è¹¤**ï¼šè¨˜éŒ„æ¯å¼µåœ–ç‰‡çš„ä¸Šå‚³è€…ï¼Œæ–¹ä¾¿å¾ŒçºŒåˆ†é…æ¨™è¨»ä»»å‹™

#### æŠ€è¡“å¯¦ç¾

```python
# backend/app/routes/qrcode.py
import qrcode
import io
import base64
from flask import Blueprint, jsonify, request, current_app
from app.utils.network import get_local_ip

qr_bp = Blueprint('qrcode', __name__)

@qr_bp.route('/api/projects/<project_id>/qrcode')
def generate_qr(project_id):
    """ç”Ÿæˆå°ˆæ¡ˆä¸Šå‚³é é¢çš„ QR Code"""
    local_ip = get_local_ip()
    port = current_app.config.get('PORT', 5000)

    # ä¸Šå‚³é é¢ URL
    upload_url = f"http://{local_ip}:{port}/upload/{project_id}"

    # ç”Ÿæˆ QR Code
    qr = qrcode.QRCode(
        version=1,
        error_correction=qrcode.constants.ERROR_CORRECT_M,
        box_size=10,
        border=4,
    )
    qr.add_data(upload_url)
    qr.make(fit=True)

    img = qr.make_image(fill_color="black", back_color="white")

    # è½‰ç‚º base64
    buffer = io.BytesIO()
    img.save(buffer, format='PNG')
    img_base64 = base64.b64encode(buffer.getvalue()).decode()

    return jsonify({
        'qrcode': f'data:image/png;base64,{img_base64}',
        'url': upload_url,
        'project_id': project_id
    })


@qr_bp.route('/api/projects/<project_id>/quick-upload', methods=['POST'])
def quick_upload(project_id):
    """æ‰‹æ©Ÿç«¯å¿«é€Ÿä¸Šå‚³ (å…ç™»å…¥)"""
    nickname = request.form.get('nickname', 'åŒ¿å')
    files = request.files.getlist('images')

    uploaded = []
    for file in files:
        if file and allowed_file(file.filename):
            # å„²å­˜åœ–ç‰‡
            filename = save_uploaded_file(file, project_id)
            uploaded.append({
                'filename': filename,
                'uploader': nickname,
                'source': 'mobile'
            })

    return jsonify({
        'success': True,
        'uploaded': len(uploaded),
        'files': uploaded
    })
```

```vue
<!-- frontend/src/views/MobileUpload.vue -->
<template>
  <div class="mobile-upload">
    <h2>{{ projectName }}</h2>

    <!-- æ‹ç…§/é¸æ“‡å€åŸŸ -->
    <div class="upload-area" @click="triggerInput">
      <input
        ref="fileInput"
        type="file"
        accept="image/*"
        multiple
        capture="environment"
        @change="handleFiles"
      />
      <div class="placeholder">
        <span class="icon">ğŸ“·</span>
        <p>é»æ“Šæ‹ç…§æˆ–é¸æ“‡ç›¸ç°¿</p>
      </div>
    </div>

    <!-- é è¦½å·²é¸åœ–ç‰‡ -->
    <div class="preview-grid">
      <div v-for="(img, idx) in selectedImages" :key="idx" class="preview-item">
        <img :src="img.preview" />
        <button @click="removeImage(idx)">âœ•</button>
      </div>
    </div>

    <!-- æš±ç¨±è¼¸å…¥ -->
    <input v-model="nickname" placeholder="è¼¸å…¥ä½ çš„æš±ç¨±" class="nickname-input" />

    <!-- ä¸Šå‚³æŒ‰éˆ• -->
    <button
      class="upload-btn"
      :disabled="selectedImages.length === 0 || uploading"
      @click="upload"
    >
      {{ uploading ? `ä¸Šå‚³ä¸­ ${progress}%` : `ä¸Šå‚³ (${selectedImages.length} å¼µ)` }}
    </button>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { compressImage } from '@/utils/imageCompress'

const selectedImages = ref([])
const nickname = ref('')
const uploading = ref(false)
const progress = ref(0)

async function handleFiles(e) {
  const files = Array.from(e.target.files)

  for (const file of files) {
    // å£“ç¸®åœ–ç‰‡ (é™åˆ¶æœ€å¤§ 1920pxï¼Œå“è³ª 0.8)
    const compressed = await compressImage(file, 1920, 0.8)
    selectedImages.value.push({
      file: compressed,
      preview: URL.createObjectURL(compressed)
    })
  }
}

async function upload() {
  uploading.value = true
  const formData = new FormData()
  formData.append('nickname', nickname.value || 'åŒ¿å')

  selectedImages.value.forEach(img => {
    formData.append('images', img.file)
  })

  // ä½¿ç”¨ XMLHttpRequest è¿½è¹¤é€²åº¦
  const xhr = new XMLHttpRequest()
  xhr.upload.onprogress = (e) => {
    progress.value = Math.round((e.loaded / e.total) * 100)
  }

  xhr.onload = () => {
    uploading.value = false
    selectedImages.value = []
    alert('ä¸Šå‚³æˆåŠŸï¼')
  }

  xhr.open('POST', `/api/projects/${projectId}/quick-upload`)
  xhr.send(formData)
}
</script>
```

#### åœ–ç‰‡å£“ç¸®å·¥å…·

```javascript
// frontend/src/utils/imageCompress.js
export async function compressImage(file, maxSize = 1920, quality = 0.8) {
  return new Promise((resolve) => {
    const reader = new FileReader()
    reader.onload = (e) => {
      const img = new Image()
      img.onload = () => {
        const canvas = document.createElement('canvas')
        let { width, height } = img

        // ç­‰æ¯”ä¾‹ç¸®æ”¾
        if (width > maxSize || height > maxSize) {
          if (width > height) {
            height = (height / width) * maxSize
            width = maxSize
          } else {
            width = (width / height) * maxSize
            height = maxSize
          }
        }

        canvas.width = width
        canvas.height = height

        const ctx = canvas.getContext('2d')
        ctx.drawImage(img, 0, 0, width, height)

        canvas.toBlob(resolve, 'image/jpeg', quality)
      }
      img.src = e.target.result
    }
    reader.readAsDataURL(file)
  })
}
```

#### æ•™å®¤ä½¿ç”¨å ´æ™¯

```
1. æ•™å¸«å»ºç«‹å°ˆæ¡ˆã€Œæ ¡åœ’æ¤ç‰©è¾¨è­˜ã€
2. é»æ“Šã€Œé¡¯ç¤º QR Codeã€ï¼ŒæŠ•å½±åˆ°æ•™å®¤è¢å¹•
3. å­¸ç”Ÿæ‰‹æ©Ÿé€£æ¥æ•™å®¤ WiFi
4. æƒæ QR Codeï¼Œé€²å…¥ä¸Šå‚³é é¢
5. å­¸ç”Ÿåœ¨æ ¡åœ’æ‹æ”æ¤ç‰©ç…§ç‰‡ï¼Œç›´æ¥ä¸Šå‚³
6. æ•™å¸«ç«¯å³æ™‚çœ‹åˆ°ä¸Šå‚³æ•¸é‡å¢åŠ 
7. æ”¶é›†å®Œæˆå¾Œï¼Œåˆ†é…æ¨™è¨»ä»»å‹™çµ¦å„çµ„å­¸ç”Ÿ
```

### 5. è³‡æ–™åŒ¯å‡º

æ”¯æ´ä¸»æµæ ¼å¼åŒ¯å‡ºï¼š

| æ ¼å¼ | ç”¨é€” |
|------|------|
| **COCO JSON** | Detectron2ã€MMDetection |
| **YOLO TXT** | YOLOv5ã€YOLOv8ã€YOLO11 |
| **Pascal VOC XML** | å‚³çµ±ç‰©ä»¶åµæ¸¬ |
| **CreateML JSON** | Apple Core ML |
| **CSV** | è‡ªå®šç¾©è™•ç† |

### 5. è³‡æ–™é›†åˆ†å‰²èˆ‡ç®¡ç†

#### åˆ†å‰²æ¯”ä¾‹è¨­å®š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è³‡æ–™é›†åˆ†å‰²è¨­å®š                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Training    [=============================] 70%  â—€â”€â”€â” â”‚
â”‚  Validation  [=========]                    20%     â”‚ â”‚
â”‚  Test        [===]                          10%     â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¸½è¨ˆ: 1000 å¼µ    â—‹ éš¨æ©Ÿåˆ†é…  â— ä¾åºåˆ†é…               â”‚
â”‚                                                         â”‚
â”‚  [ é‡æ–°åˆ†é… ]  [ é è¦½åˆ†é…çµæœ ]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **è‡ªè¨‚æ¯”ä¾‹**ï¼šæ‹–æ›³æ»‘æ¡¿æˆ–è¼¸å…¥ç™¾åˆ†æ¯” (å¦‚ 80/10/10ã€70/20/10)
- **åˆ†é…ç­–ç•¥**ï¼šéš¨æ©Ÿåˆ†é… / ä¾åºåˆ†é… / åˆ†å±¤æŠ½æ¨£ (æŒ‰é¡åˆ¥å¹³è¡¡)
- **æ‰‹å‹•èª¿æ•´**ï¼šå¯å°‡å–®å¼µåœ–ç‰‡æ‹–æ›³è‡³ä¸åŒåˆ†å‰²å€
- **é–å®šæ©Ÿåˆ¶**ï¼šå·²æ¨™è¨»çš„åœ–ç‰‡å¯é–å®šåˆ†å‰²ï¼Œé¿å…é‡æ–°åˆ†é…æ™‚è¢«ç§»å‹•

### 6. è³‡æ–™å¢å¼· (Data Augmentation)

åŒ¯å‡ºæ™‚å¯é¸æ“‡å¥—ç”¨è³‡æ–™å¢å¼·ï¼Œæ“´å……è¨“ç·´è³‡æ–™é›†ã€‚

#### å¢å¼·é¸é …

| é¡åˆ¥ | å¢å¼·æ–¹å¼ | åƒæ•¸ | èªªæ˜ |
|------|----------|------|------|
| **å¹¾ä½•è®Šæ›** | æ°´å¹³ç¿»è½‰ | - | å·¦å³é¡åƒ |
| | å‚ç›´ç¿»è½‰ | - | ä¸Šä¸‹é¡åƒ |
| | æ—‹è½‰ | -45Â° ~ +45Â° | éš¨æ©Ÿè§’åº¦æ—‹è½‰ |
| | ç¸®æ”¾ | 0.5x ~ 1.5x | éš¨æ©Ÿç¸®æ”¾æ¯”ä¾‹ |
| | è£åˆ‡ | 0% ~ 30% | éš¨æ©Ÿè£åˆ‡é‚Šç·£ |
| | å¹³ç§» | -20% ~ +20% | éš¨æ©Ÿä½ç§» |
| | å‚¾æ–œ | -15Â° ~ +15Â° | é€è¦–è®Šå½¢ |
| **è‰²å½©èª¿æ•´** | äº®åº¦ | -30% ~ +30% | èª¿æ•´æ˜æš— |
| | å°æ¯”åº¦ | 0.7x ~ 1.3x | èª¿æ•´å°æ¯” |
| | é£½å’Œåº¦ | 0.7x ~ 1.3x | èª¿æ•´è‰²å½©é®®è±”åº¦ |
| | è‰²ç›¸åç§» | -20Â° ~ +20Â° | è‰²èª¿å¾®èª¿ |
| | ç°éš | æ©Ÿç‡ 0~100% | éš¨æ©Ÿè½‰ç°éš |
| **å™ªé»èˆ‡æ¨¡ç³Š** | é«˜æ–¯å™ªé» | Ïƒ: 0 ~ 25 | åŠ å…¥éš¨æ©Ÿé›œè¨Š |
| | æ¤’é¹½å™ªé» | å¯†åº¦: 0 ~ 5% | é»‘ç™½é»é›œè¨Š |
| | é«˜æ–¯æ¨¡ç³Š | åŠå¾‘: 0 ~ 3px | æ¨¡ç³Šæ•ˆæœ |
| | å‹•æ…‹æ¨¡ç³Š | å¼·åº¦: 0 ~ 7px | æ¨¡æ“¬é‹å‹•æ¨¡ç³Š |
| **é€²éš** | Mosaic | 4/9 æ ¼ | æ‹¼è²¼å¤šå¼µåœ–ç‰‡ (YOLO é¢¨æ ¼) |
| | Mixup | Î±: 0.2 ~ 0.5 | åœ–ç‰‡æ··åˆ |
| | Cutout | é®ç½©æ•¸: 1~5 | éš¨æ©Ÿé®æ“‹å€å¡Š |

#### å¢å¼·è¨­å®šä»‹é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è³‡æ–™å¢å¼·è¨­å®š                          [ å³æ™‚é è¦½ ]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â˜‘ æ°´å¹³ç¿»è½‰        æ©Ÿç‡: [===â—=====] 50%               â”‚
â”‚  â˜‘ æ—‹è½‰            ç¯„åœ: [-15Â°] ~ [+15Â°]               â”‚
â”‚  â˜‘ ç¸®æ”¾            ç¯„åœ: [0.8x] ~ [1.2x]               â”‚
â”‚  â˜ å‚ç›´ç¿»è½‰                                            â”‚
â”‚  â˜‘ äº®åº¦èª¿æ•´        ç¯„åœ: [-20%] ~ [+20%]               â”‚
â”‚  â˜‘ é«˜æ–¯å™ªé»        Ïƒ: [=â—========] 10                  â”‚
â”‚  â˜ å‹•æ…‹æ¨¡ç³Š                                            â”‚
â”‚  â˜ Mosaic                                              â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¯å¼µåŸåœ–ç”Ÿæˆ: [  3  ] å¼µå¢å¼·åœ–ç‰‡                        â”‚
â”‚  é ä¼°ç¸½é‡: åŸå§‹ 500 å¼µ â†’ å¢å¼·å¾Œ 2000 å¼µ                  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åŸåœ–    â”‚ â”‚ å¢å¼· #1  â”‚ â”‚ å¢å¼· #2  â”‚ â”‚ å¢å¼· #3  â”‚   â”‚
â”‚  â”‚  [IMG]   â”‚ â”‚  [IMG]   â”‚ â”‚  [IMG]   â”‚ â”‚  [IMG]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æŠ€è¡“å¯¦ç¾ (Pillow / OpenCV)

```python
# backend/app/services/augmentation.py
import cv2
import numpy as np
from PIL import Image, ImageEnhance, ImageFilter
import random

class Augmentor:
    """è³‡æ–™å¢å¼·å™¨"""

    def __init__(self, config: dict):
        self.config = config

    def augment(self, image: np.ndarray, annotations: list) -> tuple:
        """
        å¥—ç”¨å¢å¼·ä¸¦åŒæ­¥èª¿æ•´æ¨™è¨»åº§æ¨™

        Args:
            image: OpenCV æ ¼å¼åœ–ç‰‡ (BGR)
            annotations: æ¨™è¨»åˆ—è¡¨ [{"bbox": [x,y,w,h], "class": "cat"}, ...]

        Returns:
            (augmented_image, adjusted_annotations)
        """
        img = image.copy()
        annos = [a.copy() for a in annotations]

        # å¹¾ä½•è®Šæ› (éœ€åŒæ­¥èª¿æ•´æ¨™è¨»)
        if self.config.get('horizontal_flip') and random.random() < 0.5:
            img, annos = self._horizontal_flip(img, annos)

        if self.config.get('rotation'):
            angle = random.uniform(*self.config['rotation_range'])
            img, annos = self._rotate(img, annos, angle)

        if self.config.get('scale'):
            factor = random.uniform(*self.config['scale_range'])
            img, annos = self._scale(img, annos, factor)

        # è‰²å½©èª¿æ•´ (ä¸å½±éŸ¿æ¨™è¨»)
        if self.config.get('brightness'):
            img = self._adjust_brightness(img, self.config['brightness_range'])

        if self.config.get('gaussian_noise'):
            img = self._add_gaussian_noise(img, self.config['noise_sigma'])

        return img, annos

    def _horizontal_flip(self, img, annos):
        """æ°´å¹³ç¿»è½‰"""
        h, w = img.shape[:2]
        img = cv2.flip(img, 1)

        for anno in annos:
            x, y, bw, bh = anno['bbox']
            anno['bbox'] = [w - x - bw, y, bw, bh]

        return img, annos

    def _rotate(self, img, annos, angle):
        """æ—‹è½‰åœ–ç‰‡èˆ‡æ¨™è¨»"""
        h, w = img.shape[:2]
        center = (w // 2, h // 2)
        M = cv2.getRotationMatrix2D(center, angle, 1.0)
        img = cv2.warpAffine(img, M, (w, h), borderMode=cv2.BORDER_REFLECT)

        # æ—‹è½‰æ¨™è¨»æ¡† (ç°¡åŒ–ï¼šé‡æ–°è¨ˆç®—å¤–æ¥çŸ©å½¢)
        for anno in annos:
            anno['bbox'] = self._rotate_bbox(anno['bbox'], M, w, h)

        return img, annos

    def _add_gaussian_noise(self, img, sigma):
        """åŠ å…¥é«˜æ–¯å™ªé»"""
        noise = np.random.normal(0, sigma, img.shape).astype(np.float32)
        noisy = np.clip(img.astype(np.float32) + noise, 0, 255)
        return noisy.astype(np.uint8)

    def _adjust_brightness(self, img, range_):
        """èª¿æ•´äº®åº¦"""
        factor = random.uniform(*range_)
        hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV).astype(np.float32)
        hsv[:, :, 2] = np.clip(hsv[:, :, 2] * (1 + factor), 0, 255)
        return cv2.cvtColor(hsv.astype(np.uint8), cv2.COLOR_HSV2BGR)
```

#### å¢å¼·ç­–ç•¥å»ºè­°

| æ‡‰ç”¨å ´æ™¯ | å»ºè­°å¢å¼·çµ„åˆ |
|----------|-------------|
| **ç‰©ä»¶åµæ¸¬ (ä¸€èˆ¬)** | ç¿»è½‰ + æ—‹è½‰Â±15Â° + ç¸®æ”¾0.8~1.2x + äº®åº¦Â±20% |
| **å°ç‰©ä»¶åµæ¸¬** | ä¸Šè¿° + éš¨æ©Ÿè£åˆ‡ + Mosaic |
| **å…‰ç·šè®ŠåŒ–å¤§** | äº®åº¦Â±40% + å°æ¯”åº¦ + é«˜æ–¯å™ªé» |
| **æˆ¶å¤–å ´æ™¯** | å‹•æ…‹æ¨¡ç³Š + è‰²ç›¸åç§» + é£½å’Œåº¦ |
| **é†«ç™‚å½±åƒ** | åƒ…å¹¾ä½•è®Šæ›ï¼Œé¿å…è‰²å½©èª¿æ•´ |

## é–‹ç™¼éšæ®µè¦åŠƒ

### Phase 1ï¼šåŸºç¤æ¶æ§‹
- [ ] Flask å¾Œç«¯ API æ¡†æ¶
- [ ] Vue 3 å‰ç«¯å°ˆæ¡ˆå»ºç«‹
- [ ] SQLite è³‡æ–™åº«è¨­è¨ˆ
- [ ] ä½¿ç”¨è€…èªè­‰ç³»çµ± (ç°¡æ˜“å¸³è™Ÿå¯†ç¢¼)

### Phase 2ï¼šæ ¸å¿ƒæ¨™è¨»åŠŸèƒ½
- [ ] Canvas ç•«å¸ƒæ¸²æŸ“
- [ ] Bounding Box æ¨™è¨»å·¥å…·
- [ ] Polygon æ¨™è¨»å·¥å…·
- [ ] æ¨™è¨»è³‡æ–™ CRUD API

### Phase 3ï¼šå°ˆæ¡ˆç®¡ç†
- [ ] å°ˆæ¡ˆå»ºç«‹èˆ‡è¨­å®š
- [ ] åœ–ç‰‡ä¸Šå‚³èˆ‡ç®¡ç†
- [ ] é¡åˆ¥ (Class) ç®¡ç†

### Phase 4ï¼šå”ä½œåŠŸèƒ½
- [ ] å¤šç”¨æˆ¶æ”¯æ´
- [ ] ä»»å‹™åˆ†é…ç³»çµ±
- [ ] é€²åº¦çµ±è¨ˆå„€è¡¨æ¿
- [ ] QR Code ç”Ÿæˆ (qrcode åº«)
- [ ] æ‰‹æ©Ÿä¸Šå‚³é é¢ (éŸ¿æ‡‰å¼è¨­è¨ˆ)
- [ ] åœ–ç‰‡å£“ç¸®ä¸Šå‚³
- [ ] å³æ™‚ä¸Šå‚³çµ±è¨ˆ

### Phase 5ï¼šåŒ¯å‡ºèˆ‡æ•´åˆ
- [ ] å¤šæ ¼å¼åŒ¯å‡º (COCOã€YOLOã€VOCã€CreateML)
- [ ] åŒ¯å‡ºå‰é è¦½èˆ‡é©—è­‰

### Phase 6ï¼šè³‡æ–™é›†ç®¡ç†èˆ‡å¢å¼·
- [ ] è³‡æ–™é›†åˆ†å‰²ä»‹é¢ (Train/Val/Test æ¯”ä¾‹èª¿æ•´)
- [ ] åˆ†é…ç­–ç•¥ (éš¨æ©Ÿ/ä¾åº/åˆ†å±¤æŠ½æ¨£)
- [ ] åŸºç¤å¢å¼· (ç¿»è½‰ã€æ—‹è½‰ã€ç¸®æ”¾)
- [ ] è‰²å½©å¢å¼· (äº®åº¦ã€å°æ¯”åº¦ã€é£½å’Œåº¦)
- [ ] å™ªé»èˆ‡æ¨¡ç³Š (é«˜æ–¯å™ªé»ã€å‹•æ…‹æ¨¡ç³Š)
- [ ] é€²éšå¢å¼· (Mosaicã€Mixupã€Cutout)
- [ ] å¢å¼·å³æ™‚é è¦½
- [ ] æ¨™è¨»åº§æ¨™åŒæ­¥èª¿æ•´

### Phase 7ï¼šæ‰“åŒ…èˆ‡éƒ¨ç½²
- [ ] Flask æ•´åˆ Vue éœæ…‹æ–‡ä»¶æœå‹™
- [ ] PyInstaller æ‰“åŒ…é…ç½®
- [ ] å•Ÿå‹•å™¨ (è‡ªå‹•é¡¯ç¤º IPã€é–‹å•Ÿç€è¦½å™¨)
- [ ] ä¸€éµå»ºç½®è…³æœ¬
- [ ] ç³»çµ±æ‰˜ç›¤æ¨¡å¼ (å¯é¸)

## ç›®éŒ„çµæ§‹

```
LabelStudio/
â”œâ”€â”€ backend/                 # Flask å¾Œç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models/         # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/       # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ migrations/         # è³‡æ–™åº«é·ç§»
â”‚   â”œâ”€â”€ config.py
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/               # Vue 3 å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ views/         # é é¢
â”‚   â”‚   â”œâ”€â”€ stores/        # Pinia ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”‚
â”œâ”€â”€ scripts/               # æ‰“åŒ…è…³æœ¬
â”‚   â”œâ”€â”€ build.py          # è‡ªå‹•åŒ–å»ºç½®è…³æœ¬
â”‚   â””â”€â”€ labelstudio.spec  # PyInstaller é…ç½®
â”‚
â”œâ”€â”€ uploads/               # ä¸Šå‚³åœ–ç‰‡å„²å­˜
â”œâ”€â”€ exports/               # åŒ¯å‡ºæª”æ¡ˆæš«å­˜
â””â”€â”€ README.md
```

## Windows ä¸€éµéƒ¨ç½²æ–¹æ¡ˆ

### è¨­è¨ˆç›®æ¨™

æ•™å¸«åªéœ€é›™æ“Š `LabelStudio.exe`ï¼Œå³å¯åœ¨å€ç¶²å…§å•Ÿå‹•æœå‹™ï¼Œå­¸å“¡ç€è¦½å™¨è¼¸å…¥ IP å³å¯ä½¿ç”¨ã€‚

**ä¸éœ€è¦å®‰è£**ï¼šPythonã€Node.jsã€è³‡æ–™åº«

### æŠ€è¡“æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ‰“åŒ…æµç¨‹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. npm run build     â†’  Vue ç·¨è­¯æˆ dist/ éœæ…‹æ–‡ä»¶           â”‚
â”‚  2. Flask æ•´åˆéœæ…‹æ–‡ä»¶  â†’  å–®ä¸€ Python æ‡‰ç”¨æœå‹™å‰å¾Œç«¯          â”‚
â”‚  3. PyInstaller æ‰“åŒ…   â†’  ç”Ÿæˆ LabelStudio.exe              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æœ€çµ‚ç”¢ç‰©ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LabelStudio/           â”‚
â”‚  â”œâ”€â”€ LabelStudio.exe    â”‚  â† é›™æ“Šå•Ÿå‹•
â”‚  â””â”€â”€ data/              â”‚  â† è‡ªå‹•ç”Ÿæˆ (è³‡æ–™åº« + ä¸Šå‚³æª”æ¡ˆ)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒå¯¦ç¾

#### 1. Flask æ•´åˆéœæ…‹å‰ç«¯

```python
# backend/app/__init__.py
from flask import Flask, send_from_directory
import os
import sys

def get_resource_path(relative_path):
    """å–å¾—è³‡æºè·¯å¾‘ï¼Œæ”¯æ´ PyInstaller æ‰“åŒ…"""
    if hasattr(sys, '_MEIPASS'):
        # PyInstaller æ‰“åŒ…å¾Œçš„è‡¨æ™‚ç›®éŒ„
        return os.path.join(sys._MEIPASS, relative_path)
    return os.path.join(os.path.dirname(__file__), '..', '..', relative_path)

def create_app():
    # éœæ…‹æ–‡ä»¶è·¯å¾‘ (Vue ç·¨è­¯ç”¢ç‰©)
    static_folder = get_resource_path('dist')

    app = Flask(__name__,
                static_folder=static_folder,
                static_url_path='')

    # å‰ç«¯è·¯ç”±ï¼šæ‰€æœ‰é API è«‹æ±‚è¿”å› index.html (SPA)
    @app.route('/')
    @app.route('/<path:path>')
    def serve_frontend(path=''):
        if path.startswith('api/'):
            return {'error': 'Not Found'}, 404

        # å˜—è©¦è¿”å›éœæ…‹æ–‡ä»¶ï¼Œå¦å‰‡è¿”å› index.html
        file_path = os.path.join(app.static_folder, path)
        if os.path.isfile(file_path):
            return send_from_directory(app.static_folder, path)
        return send_from_directory(app.static_folder, 'index.html')

    return app
```

#### 2. ä¸»ç¨‹å¼å…¥å£ (å•Ÿå‹•å™¨)

```python
# backend/main.py
import os
import sys
import socket
import webbrowser
import threading
from app import create_app

def get_local_ip():
    """å–å¾—æœ¬æ©Ÿå€ç¶² IP"""
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    try:
        s.connect(('8.8.8.8', 80))
        ip = s.getsockname()[0]
    except Exception:
        ip = '127.0.0.1'
    finally:
        s.close()
    return ip

def get_data_dir():
    """å–å¾—è³‡æ–™ç›®éŒ„ (exe åŒå±¤ç´š)"""
    if getattr(sys, 'frozen', False):
        # PyInstaller æ‰“åŒ…å¾Œ
        base_dir = os.path.dirname(sys.executable)
    else:
        base_dir = os.path.dirname(__file__)

    data_dir = os.path.join(base_dir, 'data')
    os.makedirs(data_dir, exist_ok=True)
    return data_dir

def main():
    host = '0.0.0.0'
    port = 5000
    local_ip = get_local_ip()

    # è¨­å®šè³‡æ–™ç›®éŒ„
    data_dir = get_data_dir()
    os.environ['LABELSTUDIO_DATA_DIR'] = data_dir

    print("=" * 50)
    print("  LabelStudio æ¨™è¨»å·¥å…·")
    print("=" * 50)
    print(f"  æœ¬æ©Ÿå­˜å–: http://localhost:{port}")
    print(f"  å€ç¶²å­˜å–: http://{local_ip}:{port}")
    print(f"  è³‡æ–™ç›®éŒ„: {data_dir}")
    print("=" * 50)
    print("  æŒ‰ Ctrl+C åœæ­¢æœå‹™")
    print("=" * 50)

    # è‡ªå‹•é–‹å•Ÿç€è¦½å™¨
    threading.Timer(1.5, lambda: webbrowser.open(f'http://localhost:{port}')).start()

    # å•Ÿå‹• Flask
    app = create_app()
    app.run(host=host, port=port, threaded=True)

if __name__ == '__main__':
    main()
```

#### 3. PyInstaller æ‰“åŒ…é…ç½®

```python
# scripts/labelstudio.spec
# -*- mode: python ; coding: utf-8 -*-

block_cipher = None

a = Analysis(
    ['../backend/main.py'],
    pathex=[],
    binaries=[],
    datas=[
        ('../dist', 'dist'),           # Vue ç·¨è­¯ç”¢ç‰©
    ],
    hiddenimports=[
        'flask',
        'flask_cors',
        'flask_sqlalchemy',
        'sqlalchemy',
        'PIL',
    ],
    hookspath=[],
    runtime_hooks=[],
    excludes=[],
    win_no_prefer_redirects=False,
    win_private_assemblies=False,
    cipher=block_cipher,
)

pyz = PYZ(a.pure, a.zipped_data, cipher=block_cipher)

exe = EXE(
    pyz,
    a.scripts,
    a.binaries,
    a.zipfiles,
    a.datas,
    [],
    name='LabelStudio',
    debug=False,
    bootloader_ignore_signals=False,
    strip=False,
    upx=True,                    # å£“ç¸®åŸ·è¡Œæª”
    console=True,                # é¡¯ç¤ºæ§åˆ¶å° (æ–¹ä¾¿çœ‹ IP)
    icon='../assets/icon.ico',   # æ‡‰ç”¨åœ–ç¤º
)
```

#### 4. ä¸€éµå»ºç½®è…³æœ¬

```python
# scripts/build.py
import subprocess
import shutil
import os

ROOT_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

def build():
    print("[1/4] æ¸…ç†èˆŠå»ºç½®...")
    for folder in ['dist', 'build', 'output']:
        path = os.path.join(ROOT_DIR, folder)
        if os.path.exists(path):
            shutil.rmtree(path)

    print("[2/4] å»ºç½®å‰ç«¯...")
    frontend_dir = os.path.join(ROOT_DIR, 'frontend')
    subprocess.run(['npm', 'run', 'build'], cwd=frontend_dir, shell=True, check=True)

    # å°‡å‰ç«¯ç”¢ç‰©ç§»åˆ°æ ¹ç›®éŒ„
    shutil.move(
        os.path.join(frontend_dir, 'dist'),
        os.path.join(ROOT_DIR, 'dist')
    )

    print("[3/4] æ‰“åŒ…åŸ·è¡Œæª”...")
    scripts_dir = os.path.join(ROOT_DIR, 'scripts')
    subprocess.run([
        'pyinstaller',
        '--clean',
        '--noconfirm',
        'labelstudio.spec'
    ], cwd=scripts_dir, shell=True, check=True)

    print("[4/4] æ•´ç†è¼¸å‡º...")
    output_dir = os.path.join(ROOT_DIR, 'output')
    os.makedirs(output_dir, exist_ok=True)

    shutil.copy(
        os.path.join(scripts_dir, 'dist', 'LabelStudio.exe'),
        os.path.join(output_dir, 'LabelStudio.exe')
    )

    print("\n" + "=" * 50)
    print("å»ºç½®å®Œæˆï¼")
    print(f"åŸ·è¡Œæª”ä½ç½®: {os.path.join(output_dir, 'LabelStudio.exe')}")
    print("=" * 50)

if __name__ == '__main__':
    build()
```

### å»ºç½®ç’°å¢ƒéœ€æ±‚ (åƒ…é–‹ç™¼è€…éœ€è¦)

```bash
# å»ºç½®ç’°å¢ƒ (ä¸€æ¬¡æ€§è¨­å®š)
pip install pyinstaller flask flask-cors flask-sqlalchemy pillow qrcode opencv-python
npm install  # åœ¨ frontend ç›®éŒ„

# åŸ·è¡Œå»ºç½®
python scripts/build.py
```

### æœ€çµ‚ä½¿ç”¨è€…é«”é©—

```
1. æ•™å¸«æ”¶åˆ° LabelStudio.exe (ç´„ 30-50 MB)
2. é›™æ“ŠåŸ·è¡Œï¼Œæ§åˆ¶å°é¡¯ç¤ºå€ç¶² IP
3. å‘ŠçŸ¥å­¸å“¡è¼¸å…¥ http://192.168.x.x:5000
4. é–‹å§‹æ¨™è¨»
5. é—œé–‰è¦–çª—å³åœæ­¢æœå‹™
```

### é€²éšé¸é …ï¼šç³»çµ±æ‰˜ç›¤æ¨¡å¼

å¦‚æœä¸æƒ³é¡¯ç¤ºé»‘è‰²æ§åˆ¶å°è¦–çª—ï¼Œå¯ä½¿ç”¨ `pystray` å¯¦ç¾ç³»çµ±æ‰˜ç›¤ï¼š

```python
# æ›¿ä»£æ–¹æ¡ˆï¼šæ‰˜ç›¤åœ–ç¤º (é€²éš)
# pip install pystray pillow

import pystray
from PIL import Image
import threading

def create_tray_icon(local_ip, port):
    # å»ºç«‹æ‰˜ç›¤åœ–ç¤º
    icon_image = Image.new('RGB', (64, 64), color='#4CAF50')

    menu = pystray.Menu(
        pystray.MenuItem(f'å€ç¶²: http://{local_ip}:{port}', None, enabled=False),
        pystray.MenuItem('é–‹å•Ÿç€è¦½å™¨', lambda: webbrowser.open(f'http://localhost:{port}')),
        pystray.MenuItem('çµæŸ', lambda icon, item: icon.stop())
    )

    icon = pystray.Icon('LabelStudio', icon_image, 'LabelStudio', menu)
    return icon
```

## å¿«é€Ÿé–‹å§‹

```bash
# å¾Œç«¯
cd backend
pip install -r requirements.txt
flask run --host=0.0.0.0

# å‰ç«¯
cd frontend
npm install
npm run dev
```

å­¸å“¡é€éå€åŸŸç¶²è·¯å­˜å– `http://<æ•™å¸«IP>:5173` å³å¯é–‹å§‹æ¨™è¨»ã€‚

## èˆ‡ Roboflow åŠŸèƒ½å°æ¯”

| åŠŸèƒ½ | Roboflow | LabelStudio (æœ¬å°ˆæ¡ˆ) |
|------|----------|---------------------|
| **æ¨™è¨»å·¥å…·** | | |
| Bounding Box | âœ… | âœ… è¨ˆåŠƒä¸­ |
| Polygon | âœ… | âœ… è¨ˆåŠƒä¸­ |
| Brush/Mask | âœ… | âœ… è¨ˆåŠƒä¸­ |
| Smart Polygon (SAM) | âœ… | âŒ æš«ä¸æ”¯æ´ |
| Auto Label | âœ… | âŒ æš«ä¸æ”¯æ´ |
| **è³‡æ–™é›†ç®¡ç†** | | |
| Train/Val/Test åˆ†å‰² | âœ… | âœ… è¨ˆåŠƒä¸­ |
| è‡ªè¨‚åˆ†å‰²æ¯”ä¾‹ | âœ… | âœ… è¨ˆåŠƒä¸­ |
| åˆ†å±¤æŠ½æ¨£ | âœ… | âœ… è¨ˆåŠƒä¸­ |
| **è³‡æ–™å¢å¼·** | | |
| å¹¾ä½•è®Šæ› (ç¿»è½‰/æ—‹è½‰/ç¸®æ”¾) | âœ… | âœ… è¨ˆåŠƒä¸­ |
| è‰²å½©èª¿æ•´ (äº®åº¦/å°æ¯”/é£½å’Œ) | âœ… | âœ… è¨ˆåŠƒä¸­ |
| å™ªé»/æ¨¡ç³Š | âœ… | âœ… è¨ˆåŠƒä¸­ |
| Mosaic/Mixup/Cutout | âœ… | âœ… è¨ˆåŠƒä¸­ |
| å¢å¼·å€æ•¸è¨­å®š | âœ… æœ€å¤š 50x | âœ… è¨ˆåŠƒä¸­ |
| å³æ™‚é è¦½ | âœ… | âœ… è¨ˆåŠƒä¸­ |
| **å”ä½œèˆ‡éƒ¨ç½²** | | |
| åœ˜éšŠå”ä½œ | âœ… | âœ… è¨ˆåŠƒä¸­ |
| QR Code æ‰‹æ©Ÿä¸Šå‚³ | âŒ | âœ… è¨ˆåŠƒä¸­ |
| å…ç™»å…¥å¿«é€Ÿä¸Šå‚³ | âŒ | âœ… è¨ˆåŠƒä¸­ |
| é›²ç«¯éƒ¨ç½² | âœ… | âŒ åƒ…å€ç¶² |
| é›¢ç·šä½¿ç”¨ | âŒ | âœ… |
| å…è²»ç„¡é™åˆ¶ | âŒ | âœ… |
| ä¸€éµå•Ÿå‹• (exe) | âŒ | âœ… è¨ˆåŠƒä¸­ |
| æ¨¡å‹è¨“ç·´ | âœ… | âŒ ä¸åœ¨ç¯„åœ |

## æˆæ¬Š

MIT License

## åƒè€ƒè³‡æº

- [Roboflow Annotate](https://roboflow.com/annotate)
- [Roboflow Documentation](https://docs.roboflow.com/annotate/use-roboflow-annotate)
